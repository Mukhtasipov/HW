# Домашнее задание к занятию "`Базы данных, их типы`" - `Мухтасипов Александр`


### Инструкция по выполнению домашнего задания

###   Задание 1

Задание 1. СУБД
Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

1.1. Бюджетирование проектов, финансовые отчёты и прогнозирование рисков
Рекомендуемая СУБД: Реляционная СУБД (например, PostgreSQL, MySQL, Oracle).

Почему:

Реляционные СУБД обеспечивают строгую структуру данных, что важно для финансовых операций и отчётности.

Поддержка транзакций (ACID) гарантирует целостность данных.

Встроенные инструменты для аналитики (например, оконные функции, агрегации) упрощают формирование отчётов.

Возможность интеграции с BI-инструментами (например, Tableau, Power BI) для визуализации данных.

1.1. Ускорение хеширования*:

Для ускорения хеширования можно использовать специализированные API, такие как Redis (in-memory key-value store) для кэширования результатов хеширования или Amazon DynamoDB Accelerator (DAX) для ускорения запросов к NoSQL-базам.

1.2. Лендинги и CRM для управления лидами
Рекомендуемая СУБД:

Для лендингов: NoSQL СУБД (например, MongoDB, Cassandra).

Лендинги требуют гибкости в хранении данных (например, динамические формы, разные типы лидов).

NoSQL позволяет быстро адаптировать структуру данных под изменения.

Для CRM: Реляционная СУБД (например, PostgreSQL, Microsoft SQL Server).

CRM требует чёткой структуры данных для управления лидами, взаимодействиями и аналитики.

1.2. Использование одной СУБД*:

Да, можно использовать MongoDB для обеих задач.

MongoDB поддерживает гибкую схему, что подходит для лендингов.

Для CRM можно создать чёткую структуру коллекций и документов, а также использовать агрегации для аналитики.

Альтернатива: PostgreSQL с поддержкой JSONB (для гибкости лендингов) и реляционных таблиц (для CRM).

1.3. База корпоративных норм, правил и обучающих материалов
Рекомендуемая СУБД: Реляционная СУБД (например, PostgreSQL, MySQL).

Почему:

Данные имеют чёткую структуру (нормы, правила, материалы), что хорошо ложится на реляционную модель.

Простота в поддержке и понимании структуры данных.

1.3. Использование существующей СУБД*:

Да, можно использовать ту же СУБД, что и для бюджетирования (например, PostgreSQL).

Реализация: создать отдельные таблицы или схему для хранения корпоративных норм и материалов.

1.4. Логистика: маршруты доставки и распределение курьеров
Рекомендуемая СУБД: Графовая СУБД (например, Neo4j).

Почему:

Графовые СУБД идеально подходят для работы со связями (например, маршруты, узлы, связи между объектами).

Позволяют быстро находить оптимальные маршруты и анализировать связи.

1.4. Подключение отдела закупок*:

Да, можно подключить отдел закупок к той же СУБД.

Реализация: использовать графовую модель для связей между закупками, поставщиками и логистикой.

Альтернатива: использовать реляционную СУБД (например, PostgreSQL) с таблицами для закупок и логистики, если графовая модель не требуется.

1.5. Использование одной СУБД для всех задач*
Возможно ли: Да, но с компромиссами.

Рекомендуемая СУБД: PostgreSQL.

Почему:

Поддерживает реляционную модель (для бюджетирования, CRM, норм и правил).

Имеет расширение JSONB для гибкости (лендинги).

Поддерживает расширение pgRouting для работы с маршрутами (логистика).

Универсальность и широкие возможности для интеграции.

Ограничения:

Для задач, требующих высокой производительности на графовых данных (логистика), PostgreSQL может уступать специализированным графовым СУБД.

Для больших объёмов неструктурированных данных (лендинги) NoSQL (например, MongoDB) может быть более удобным.

Итоговые рекомендации:
PostgreSQL — универсальное решение для большинства задач (бюджетирование, CRM, нормы и правила).

MongoDB — для лендингов и CRM, если требуется гибкость.

Neo4j — для логистики, если графовые запросы критичны.

Redis — для ускорения хеширования и кэширования.

Если компания готова к компромиссам, PostgreSQL может стать основной СУБД для всех задач, с дополнительными инструментами (например, Redis для кэширования и pgRouting для логистики).


###   Задание 2

Задание 2. Транзакции
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Приведите ответ в свободной форме.

2.1. Пополнение баланса счёта телефона: пошаговые действия
Инициация транзакции:

Пользователь вводит номер телефона и сумму пополнения в интерфейсе (мобильное приложение, сайт или USSD-запрос).

Система проверяет корректность введённых данных (номер телефона, сумма).

Проверка платёжного средства:

Пользователь выбирает способ оплаты (банковская карта, электронный кошелёк и т.д.).

Система отправляет запрос в платёжный шлюз для проверки доступности средств на счёте пользователя.

Блокировка средств:

Если средства доступны, платёжный шлюз блокирует сумму пополнения на счёте пользователя.

Система фиксирует начало транзакции и создаёт запись о ней в базе данных.

Пополнение баланса телефона:

Система отправляет запрос оператору связи на пополнение баланса указанного номера телефона.

Оператор связи подтверждает успешное зачисление средств и возвращает ответ системе.

Списание средств:

После подтверждения от оператора связи платёжный шлюз списывает заблокированную сумму с счёта пользователя.

Система фиксирует завершение транзакции и обновляет запись в базе данных.

Уведомление пользователя:

Пользователь получает уведомление об успешном пополнении баланса (SMS, push-уведомление или сообщение в приложении).

Система также сохраняет чек или квитанцию о транзакции в личном кабинете пользователя.

2.1. Пополнение счёта через автоплатёж: пошаговые действия*
Инициация автоплатёжа:

Система проверяет наступление условия для автоплатёжа (например, дата списания или низкий баланс).

Проверяются данные пользователя (номер телефона, привязанное платёжное средство).

Проверка платёжного средства:

Система отправляет запрос в платёжный шлюз для проверки доступности средств на привязанном счёте пользователя.

Блокировка средств:

Если средства доступны, платёжный шлюз блокирует сумму пополнения на счёте пользователя.

Система фиксирует начало транзакции и создаёт запись о ней в базе данных.

Пополнение баланса телефона:

Система отправляет запрос оператору связи на пополнение баланса указанного номера телефона.

Оператор связи подтверждает успешное зачисление средств и возвращает ответ системе.

Списание средств:

После подтверждения от оператора связи платёжный шлюз списывает заблокированную сумму с счёта пользователя.

Система фиксирует завершение транзакции и обновляет запись в базе данных.

Уведомление пользователя:

Пользователь получает уведомление об успешном пополнении баланса (SMS, push-уведомление или сообщение в приложении).

Система также сохраняет чек или квитанцию о транзакции в личном кабинете пользователя.

Основные отличия автоплатёжа:
Инициация: Транзакция запускается автоматически системой, а не пользователем.

Проверка данных: Система использует заранее сохранённые данные пользователя (номер телефона, платёжное средство).

Уведомление: Пользователь может не знать о списании до момента получения уведомления.

Таким образом, автоплатёж упрощает процесс для пользователя, но требует чёткой настройки и контроля со стороны системы.


###   Задание 3

Задание 3. SQL vs NoSQL
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.


3.1. Пять преимуществ SQL-систем по отношению к NoSQL
Чёткая структура данных:

SQL-системы используют строгую схему (таблицы, строки, столбцы), что обеспечивает целостность данных и минимизирует ошибки.

Это особенно важно для финансовых, медицинских и других систем, где точность данных критична.

Поддержка транзакций (ACID):

SQL-системы гарантируют атомарность, согласованность, изолированность и долговечность транзакций.

Это делает их идеальными для приложений, где важна надёжность (например, банковские операции).

Мощные инструменты для аналитики:

SQL предоставляет богатый набор функций для работы с данными: агрегации, оконные функции, JOIN-операции.

Это упрощает формирование сложных отчётов и аналитических запросов.

Широкая поддержка и интеграция:

SQL-системы (например, PostgreSQL, MySQL) имеют огромное сообщество, множество инструментов и библиотек для интеграции.

Большинство BI-инструментов (Tableau, Power BI) и ORM (Hibernate, SQLAlchemy) поддерживают SQL.

Стандартизация:

SQL является стандартизированным языком запросов, что упрощает миграцию между разными СУБД.

Разработчики могут легко переключаться между системами (например, от MySQL к PostgreSQL).

3.1. Преимущества NewSQL систем перед SQL и NoSQL*
NewSQL — это современные СУБД, которые сочетают преимущества SQL и NoSQL. Вот их ключевые преимущества:

Горизонтальная масштабируемость:

NewSQL системы (например, YDB) поддерживают горизонтальное масштабирование, как NoSQL, но с сохранением ACID-транзакций.

Это позволяет обрабатывать большие объёмы данных без потери производительности.

Высокая производительность:

NewSQL оптимизированы для работы с большими данными и высоконагруженными приложениями.

Они обеспечивают низкую задержку и высокую пропускную способность.

Поддержка ACID-транзакций:

В отличие от NoSQL, NewSQL сохраняют преимущества SQL-систем, такие как гарантии ACID.

Это делает их пригодными для критически важных приложений (финансы, логистика).

Гибкость и простота разработки:

NewSQL поддерживают реляционную модель, что упрощает миграцию с традиционных SQL-систем.

При этом они могут работать с распределёнными данными, как NoSQL.

Совместимость с экосистемой SQL:

NewSQL системы поддерживают стандартный SQL, что позволяет использовать существующие инструменты и библиотеки.

Это снижает затраты на обучение и интеграцию.

Распределённые транзакции:

NewSQL поддерживают распределённые транзакции, что позволяет работать с данными, разнесёнными по разным узлам, без потери согласованности.

Итог:
SQL идеален для структурированных данных, транзакций и аналитики.

NoSQL подходит для неструктурированных данных и горизонтального масштабирования.

NewSQL объединяет лучшее из обоих миров: масштабируемость NoSQL и надёжность SQL. Это делает их перспективным выбором для современных высоконагруженных приложений.

###   Задание 4

Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

Критерии выбора типа СУБД и модели распределённых вычислений
Для задачи, требующей обработки большого объёма данных на 1000 машин, ключевыми критериями выбора СУБД и модели распределённых вычислений будут:

Горизонтальная масштабируемость:

Система должна эффективно распределять данные и вычисления между множеством узлов (машин).

Это позволяет обрабатывать большие объёмы данных без потери производительности.

Поддержка распределённых вычислений:

Система должна уметь параллельно выполнять задачи на разных узлах, чтобы ускорить обработку данных.

Отказоустойчивость:

Система должна обеспечивать высокую доступность и устойчивость к сбоям отдельных узлов.

Простота управления и администрирования:

Управление кластером из 1000 машин должно быть максимально автоматизированным и удобным.

Совместимость с экосистемой Big Data:

Система должна интегрироваться с инструментами для работы с большими данными (например, Hadoop, Spark).

Тип СУБД
Для такой задачи лучше всего подойдут распределённые СУБД, такие как:

NewSQL (например, CockroachDB, Google Spanner):

Поддерживают горизонтальное масштабирование и ACID-транзакции.

Подходят для задач, где важна согласованность данных.

NoSQL (например, Cassandra, MongoDB):

Оптимизированы для работы с большими объёмами данных и высокой нагрузкой.

Подходят для задач, где важна скорость и гибкость.

Модель распределённых вычислений
Лучше всего подойдёт MapReduce или его современные аналоги (например, Apache Spark).

Почему MapReduce/Spark?
Распределение вычислений:

MapReduce разбивает задачу на две фазы: Map (распределённая обработка данных) и Reduce (агрегация результатов).

Это позволяет эффективно использовать все 1000 машин для параллельных вычислений.

Обработка больших данных:

MapReduce и Spark оптимизированы для работы с огромными объёмами данных, хранящимися в распределённых файловых системах (например, HDFS).

Отказоустойчивость:

Обе модели автоматически перераспределяют задачи в случае сбоя узла.

Интеграция с экосистемой Big Data:

Spark и MapReduce легко интегрируются с Hadoop, Cassandra и другими инструментами для работы с большими данными.

Гибкость:

Spark поддерживает не только пакетную обработку (как MapReduce), но и потоковую обработку, машинное обучение и графовые вычисления.

Итоговая рекомендация
Тип СУБД: Выберите NewSQL (например, CockroachDB), если важна согласованность данных, или NoSQL (например, Cassandra), если важна скорость и гибкость.

Модель вычислений: Используйте Apache Spark для распределённых вычислений, так как он обеспечивает высокую производительность, отказоустойчивость и гибкость.

Таким образом, сочетание распределённой СУБД и модели вычислений на основе Spark позволит эффективно обрабатывать большие объёмы данных на 1000 машин.

---
